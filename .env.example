# TronRelic Environment Configuration
# Copy this file to .env and fill in your values
#
# Development Modes:
# - npm mode (./scripts/start.sh --npm): MongoDB/Redis in Docker, backend/frontend via npm
#   Uses localhost connection strings below
# - Docker mode (./scripts/start.sh): All services in Docker containers
#   Docker Compose overrides with service names (mongodb:27017, redis:6379)

# ==============================================
# Droplet Deployment Configuration
# ==============================================
# Required for deployment scripts (./scripts/droplet-*.sh)
# Leave blank if you're only doing local development

# Production droplet IP address
PROD_DROPLET_IP=

# Development droplet IP address
DEV_DROPLET_IP=

# GitHub Container Registry credentials
GITHUB_USERNAME=
GITHUB_REPO=

# ==============================================
# Required - API Security
# ==============================================
# Generate with: openssl rand -hex 32
ADMIN_API_TOKEN=

# ==============================================
# Required - TronGrid API Keys
# ==============================================
# Get from https://www.trongrid.io/
TRONGRID_API_KEY=
TRONGRID_API_KEY_2=
TRONGRID_API_KEY_3=

# ==============================================
# Backend Configuration
# ==============================================
NODE_ENV=development
PORT=4000
ENABLE_SCHEDULER=true
ENABLE_WEBSOCKETS=true

# Database connections
# For npm mode (./scripts/start.sh --npm): Use localhost (connects to Docker containers)
# For Docker mode (./scripts/start.sh): docker-compose.yml overrides with service names
MONGODB_URI=mongodb://127.0.0.1:27017/tronrelic
REDIS_URL=redis://127.0.0.1:6379
REDIS_NAMESPACE=tronrelic

# ==============================================
# Frontend Configuration
# ==============================================
# Local development (HTTP)
NEXT_PUBLIC_API_URL=http://localhost:4000/api
NEXT_PUBLIC_SOCKET_URL=http://localhost:4000
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Production with SSL (HTTPS) - Update after running droplet-setup-ssl.sh
# NEXT_PUBLIC_API_URL=https://yourdomain.com/api
# NEXT_PUBLIC_SOCKET_URL=https://yourdomain.com
# NEXT_PUBLIC_SITE_URL=https://yourdomain.com

# ==============================================
# Production Only (Leave blank for development)
# ==============================================
# Generate with: openssl rand -hex 32 (for each)
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=
REDIS_PASSWORD=

# ==============================================
# Optional: Telegram Bot Plugin
# ==============================================
# Bot token is now configured via /system/plugins UI (stored in database)
# 1. Get token from @BotFather on Telegram
# 2. Navigate to /system/plugins in your TronRelic instance
# 3. Enable telegram-bot plugin and configure token in plugin settings

# Optional: Webhook secret for additional security (generate with: openssl rand -hex 32)
TELEGRAM_WEBHOOK_SECRET=

# Optional: IP allowlist for webhook requests (comma-separated CIDR ranges)
# Default: Telegram's official IP ranges
# TELEGRAM_IP_ALLOWLIST=149.154.160.0/20,91.108.4.0/22

# DEPRECATED: Legacy whale-alerts plugin integration (will be removed)
# Use telegram-bot plugin instead for all Telegram functionality
# TELEGRAM_TOKEN=

# ==============================================
# Backend API URL for Server-Side Rendering (SSR)
# ==============================================
# Used by Next.js server during SSR to fetch data from backend
# Docker mode: Docker Compose overrides this with API_URL=http://backend:4000
# npm mode: Uses this value (http://localhost:4000) or falls back to NEXT_PUBLIC_API_URL
# Leave as localhost for npm mode, Docker Compose will handle the override
API_URL=http://localhost:4000
